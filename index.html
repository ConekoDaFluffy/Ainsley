<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div align="center">
    <h1>PIXELKAT BOT</h1>
    <p>Click the generate button to create another message</p>
    <div id="generator">
      <button id="followDevButton" onclick="followDev()">
        <img src="ainsley.png" alt="Ainsley icon"> Follow the dev!
      </button>
      <button id="followPixelkatButton" onclick="followPixelkat()">
        <img src="pixelkat.png" alt="X icon"> Follow Pixelkat!
      </button>
      <p id="output">
        OUTPUT HERE!!
      </p>
      <button id="generateButton" onclick="generateOutput()">
        Generate
      </button>
    </div>
  </div>

  <script>
    function followDev() {
      window.open('https://twitter.com/PixelKat6', '_blank');
    }

    function followPixelkat() {
      window.open('https://twitter.com/ainsley_mainly', '_blank');
    }

    function generateTextWithProbabilities(lines) {
      const probabilities = {};

      lines.forEach((line, index, array) => {
        const words = line.split(' ');

        for (let i = 0; i < words.length - 1; i++) {
          const currentWord = words[i];
          const nextWord = words[i + 1];

          if (!probabilities[currentWord]) {
            probabilities[currentWord] = [];
          }

          probabilities[currentWord].push(nextWord);
        }

        // Consider the last word in a line
        const lastWord = words[words.length - 1];
        if (!probabilities[lastWord] && index !== array.length - 1) {
          probabilities[lastWord] = [];
        }
      });

      return probabilities;
    }

    function generateOutput() {
      fetch('db.txt')
        .then(response => response.text())
        .then(textContent => {
          const lines = textContent.split('\n').map(line => line.trim());
          const probabilities = generateTextWithProbabilities(lines);
          const generatedText = generateTextFromProbabilities(probabilities, 200);
        })
        .catch(error => console.error('Error loading file:', error));
    }
  </script>
</body>
</html>
